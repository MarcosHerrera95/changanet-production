(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[784],{8034:function(e,s,a){Promise.resolve().then(a.bind(a,2785))},2785:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return D}});var t=a(7437),l=a(2265),i=a(7815),n=a(5754),r=a(826),c=a(5195),d=a(6264),o=a(1981),x=a(4280),m=a(1298),h=a(6141),j=a(5790),u=a(4822);function g(e){let{professionalId:s}=e,[a,g]=(0,l.useState)(null),[p,N]=(0,l.useState)([]),[v,f]=(0,l.useState)([]),[b,y]=(0,l.useState)(!0),[w,Z]=(0,l.useState)(!1),[C,S]=(0,l.useState)(null);(0,l.useEffect)(()=>{_()},[s]);let _=async()=>{try{Z(!0);let e=await r.ST.getProfessionalPayments(s);if(e.data.success){let s=e.data.data;N(s.slice(0,5));let a=s.filter(e=>"liberado"===e.estado),t=s.filter(e=>"aprobado"===e.estado),l=a.reduce((e,s)=>e+s.monto_profesional,0);t.reduce((e,s)=>e+s.monto_profesional,0);let i=a[0];g({totalPayouts:a.length,totalPaid:l,totalCommission:a.reduce((e,s)=>e+s.comision_plataforma,0),pendingPayouts:t.length,latestPayout:i?{date:i.actualizado_en,amount:i.monto_profesional}:null,averagePayout:a.length>0?l/a.length:0}),f([])}else S(e.data.error||"Error al cargar datos del dashboard")}catch(s){var e,a;S((null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.error)||"Error interno del servidor")}finally{y(!1),Z(!1)}};return b?(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)(i.Zb,{children:(0,t.jsxs)(i.aY,{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(d.Z,{className:"w-6 h-6 animate-spin mr-2"}),(0,t.jsx)("span",{children:"Cargando dashboard..."})]})})}):C?(0,t.jsx)(i.Zb,{children:(0,t.jsx)(i.aY,{className:"py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.Z,{className:"w-12 h-12 text-danger-600 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-danger-800 mb-2",children:"Error"}),(0,t.jsx)("p",{className:"text-danger-600 mb-4",children:C}),(0,t.jsxs)(n.z,{onClick:_,variant:"outline",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]})})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard de Pagos"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Gestiona tus ingresos y retiros"})]}),(0,t.jsxs)(n.z,{onClick:_,disabled:w,variant:"outline",children:[w?(0,t.jsx)(d.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Actualizar"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ll,{className:"text-sm font-medium",children:"Total Ganado"}),(0,t.jsx)(m.Z,{className:"h-4 w-4 text-success-600"})]}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-success-600",children:(0,c.xG)((null==a?void 0:a.totalPaid)||0)}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[(null==a?void 0:a.totalPayouts)||0," pago",(null==a?void 0:a.totalPayouts)!==1?"s":""," completado",(null==a?void 0:a.totalPayouts)!==1?"s":""]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ll,{className:"text-sm font-medium",children:"Pendiente"}),(0,t.jsx)(h.Z,{className:"h-4 w-4 text-warning-600"})]}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-warning-600",children:(0,c.xG)(p.filter(e=>"aprobado"===e.estado).reduce((e,s)=>e+s.monto_profesional,0))}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[p.filter(e=>"aprobado"===e.estado).length," pago",1!==p.filter(e=>"aprobado"===e.estado).length?"s":""," aprobado",1!==p.filter(e=>"aprobado"===e.estado).length?"s":""]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ll,{className:"text-sm font-medium",children:"Promedio por Servicio"}),(0,t.jsx)(j.Z,{className:"h-4 w-4 text-primary-600"})]}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:(0,c.xG)((null==a?void 0:a.averagePayout)||0)}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Por servicio completado"})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ll,{className:"text-sm font-medium",children:"Comisiones Pagadas"}),(0,t.jsx)(u.Z,{className:"h-4 w-4 text-danger-600"})]}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-danger-600",children:(0,c.xG)((null==a?void 0:a.totalCommission)||0)}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Total de comisiones"})]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{children:[(0,t.jsx)(i.ll,{children:"Pagos Recientes"}),(0,t.jsx)(i.SZ,{children:"Tus \xfaltimos pagos procesados"})]}),(0,t.jsx)(i.aY,{children:0===p.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(m.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay pagos"}),(0,t.jsx)("p",{className:"text-gray-600",children:"A\xfan no has recibido pagos"})]}):(0,t.jsx)("div",{className:"space-y-4",children:p.map(e=>{var s,a;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("liberado"===e.estado?"bg-success-500":"aprobado"===e.estado?"bg-primary-500":"bg-gray-400")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===(s=e.servicio)||void 0===s?void 0:s.cliente.nombre)||"Cliente"}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[(null===(a=e.servicio)||void 0===a?void 0:a.descripcion)||"Servicio"," • ",(0,c.p6)(e.creado_en)]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-lg font-semibold text-success-600",children:["+",(0,c.xG)(e.monto_profesional)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:["Comisi\xf3n: ",(0,c.xG)(e.comision_plataforma)]})]})]},e.id)})})})]}),v.length>0&&(0,t.jsx)(i.Zb,{className:"border-warning-200 bg-warning-50",children:(0,t.jsx)(i.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(h.Z,{className:"w-5 h-5 text-warning-600 mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-warning-800",children:["Tienes ",v.length," payout",1!==v.length?"s":""," pendiente",1!==v.length?"s":""]}),(0,t.jsx)("p",{className:"text-sm text-warning-700",children:"Los fondos ser\xe1n transferidos a tu cuenta bancaria en las pr\xf3ximas 24-48 horas."})]})]})})})]})}var p=a(2457),N=a(4522),v=a(8203);function f(e){let{professionalId:s,period:a="month"}=e,[h,u]=(0,l.useState)([]),[g,f]=(0,l.useState)(!0),[b,y]=(0,l.useState)(!1),[w,Z]=(0,l.useState)(null),[C,S]=(0,l.useState)(a);(0,l.useEffect)(()=>{_()},[s,C]);let _=async()=>{try{y(!0);let e=await r.ST.getProfessionalPayments(s);if(e.data.success){let s=e.data.data,a=new Date,t=new Date;switch(C){case"week":t.setDate(a.getDate()-7);break;case"month":t.setMonth(a.getMonth()-1);break;case"year":t.setFullYear(a.getFullYear()-1)}"all"!==C&&(s=s.filter(e=>new Date(e.creado_en)>=t)),u(s),Z(null)}else Z(e.data.error||"Error al cargar datos de ganancias")}catch(s){var e,a;Z((null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.error)||"Error interno del servidor")}finally{f(!1),y(!1)}},P={week:"Esta semana",month:"Este mes",year:"Este a\xf1o",all:"Todo el tiempo"};if(g)return(0,t.jsx)(i.Zb,{className:"w-full",children:(0,t.jsxs)(i.aY,{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(d.Z,{className:"w-6 h-6 animate-spin mr-2"}),(0,t.jsx)("span",{children:"Cargando resumen de ganancias..."})]})});if(w)return(0,t.jsx)(i.Zb,{className:"w-full",children:(0,t.jsx)(i.aY,{className:"py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.Z,{className:"w-12 h-12 text-danger-600 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-danger-800 mb-2",children:"Error"}),(0,t.jsx)("p",{className:"text-danger-600 mb-4",children:w}),(0,t.jsxs)(n.z,{onClick:_,variant:"outline",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]})})});let D=(()=>{let e=h.filter(e=>"liberado"===e.estado),s=e.reduce((e,s)=>e+s.monto_profesional,0),a=e.reduce((e,s)=>e+s.comision_plataforma,0),t=e.length>0?s/e.length:0,l=new Date,i=new Date,n=new Date,r=new Date(i);switch(C){case"week":i.setDate(l.getDate()-7),n.setDate(l.getDate()-14),r.setDate(l.getDate()-7);break;case"month":i.setMonth(l.getMonth()-1),n.setMonth(l.getMonth()-2),r.setMonth(l.getMonth()-1);break;case"year":i.setFullYear(l.getFullYear()-1),n.setFullYear(l.getFullYear()-2),r.setFullYear(l.getFullYear()-1)}let c=h.filter(e=>new Date(e.creado_en)>=n&&new Date(e.creado_en)<r&&"liberado"===e.estado).reduce((e,s)=>e+s.monto_profesional,0);return{totalEarnings:s,totalCommission:a,averageEarnings:t,completedServices:e.length,trend:c>0?(s-c)/c*100:0,previousEarnings:c}})();return(0,t.jsxs)(i.Zb,{className:"w-full",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.ll,{className:"flex items-center",children:[(0,t.jsx)(p.Z,{className:"w-5 h-5 mr-2"}),"Resumen de Ganancias"]}),(0,t.jsx)(i.SZ,{children:P[C]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"flex rounded-lg border",children:Object.entries(P).map(e=>{let[s,a]=e;return(0,t.jsx)(n.z,{variant:C===s?"default":"ghost",size:"sm",onClick:()=>S(s),className:"rounded-none first:rounded-l-lg last:rounded-r-lg",children:a},s)})}),(0,t.jsx)(n.z,{onClick:_,disabled:b,variant:"outline",size:"sm",children:b?(0,t.jsx)(d.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"})})]})]})}),(0,t.jsxs)(i.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total Ganado"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-success-600",children:(0,c.xG)(D.totalEarnings)})]}),(0,t.jsx)(m.Z,{className:"w-8 h-8 text-success-600"})]}),0!==D.trend&&(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[D.trend>0?(0,t.jsx)(j.Z,{className:"w-4 h-4 text-success-600 mr-1"}):(0,t.jsx)(N.Z,{className:"w-4 h-4 text-danger-600 mr-1"}),(0,t.jsxs)("span",{className:"text-sm ".concat(D.trend>0?"text-success-600":"text-danger-600"),children:[Math.abs(D.trend).toFixed(1),"% vs per\xedodo anterior"]})]})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Comisiones"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-danger-600",children:(0,c.xG)(D.totalCommission)})]}),(0,t.jsx)(v.Z,{className:"w-8 h-8 text-danger-600"})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:[(D.totalCommission/(D.totalEarnings+D.totalCommission)*100).toFixed(1),"% del total"]})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Servicios"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-primary-600",children:D.completedServices})]}),(0,t.jsx)(p.Z,{className:"w-8 h-8 text-primary-600"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"Completados"})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Promedio"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-primary-600",children:(0,c.xG)(D.averageEarnings)})]}),(0,t.jsx)(j.Z,{className:"w-8 h-8 text-primary-600"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"Por servicio"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Ganancias Recientes"}),0===h.filter(e=>"liberado"===e.estado).length?(0,t.jsxs)("div",{className:"text-center py-8 border-2 border-dashed rounded-lg",children:[(0,t.jsx)(m.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay ganancias"}),(0,t.jsx)("p",{className:"text-gray-600",children:"all"===C?"A\xfan no has completado ning\xfan servicio":"No hay ganancias en ".concat(P[C].toLowerCase())})]}):(0,t.jsx)("div",{className:"space-y-3",children:h.filter(e=>"liberado"===e.estado).slice(0,10).map(e=>{var s,a;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-success-500 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===(s=e.servicio)||void 0===s?void 0:s.cliente.nombre)||"Cliente"}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[(null===(a=e.servicio)||void 0===a?void 0:a.descripcion)||"Servicio"," • ",(0,c.p6)(e.creado_en)]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-sm font-semibold text-success-600",children:["+",(0,c.xG)(e.monto_profesional)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:["Comisi\xf3n: ",(0,c.xG)(e.comision_plataforma)]})]})]},e.id)})})]})]})]})}var b=a(4689),y=a(1827),w=a(2482),Z=a(9224),C=a(3523),S=a(9670),_=a(5817);function P(e){let{professionalId:s,showFilters:a=!0}=e,[m,h]=(0,l.useState)([]),[j,u]=(0,l.useState)([]),[g,p]=(0,l.useState)(!0),[N,v]=(0,l.useState)(!1),[f,P]=(0,l.useState)(null),[D,k]=(0,l.useState)(null),[E,z]=(0,l.useState)(""),[G,Y]=(0,l.useState)("all"),[T,F]=(0,l.useState)("date"),[M,L]=(0,l.useState)("desc");(0,l.useEffect)(()=>{O()},[s]),(0,l.useEffect)(()=>{R()},[m,E,G,T,M]);let O=async()=>{try{v(!0);let e=await r.ST.getProfessionalPayments(s);e.data.success?(h(e.data.data),P(null)):P(e.data.error||"Error al cargar transacciones")}catch(s){var e,a;P((null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.error)||"Error interno del servidor")}finally{p(!1),v(!1)}},R=()=>{let e=m;E&&(e=e.filter(e=>{var s,a;return(null===(s=e.servicio)||void 0===s?void 0:s.cliente.nombre.toLowerCase().includes(E.toLowerCase()))||(null===(a=e.servicio)||void 0===a?void 0:a.descripcion.toLowerCase().includes(E.toLowerCase()))||e.id.toLowerCase().includes(E.toLowerCase())})),"all"!==G&&(e=e.filter(e=>e.estado===G)),e.sort((e,s)=>{let a,t;return("date"===T?(a=new Date(e.creado_en),t=new Date(s.creado_en)):(a=e.monto_profesional,t=s.monto_profesional),"asc"===M)?a>t?1:-1:a<t?1:-1}),u(e)},A=async e=>{try{let s=await r.ST.generateReceipt(e);s.data.success&&window.open(s.data.data.receiptUrl,"_blank")}catch(e){P("Error al generar el comprobante")}},I=e=>{k(D===e?null:e)},U=e=>{T===e?L("asc"===M?"desc":"asc"):(F(e),L("desc"))};return g?(0,t.jsx)(i.Zb,{className:"w-full",children:(0,t.jsxs)(i.aY,{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(d.Z,{className:"w-6 h-6 animate-spin mr-2"}),(0,t.jsx)("span",{children:"Cargando transacciones..."})]})}):f?(0,t.jsx)(i.Zb,{className:"w-full",children:(0,t.jsx)(i.aY,{className:"py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.Z,{className:"w-12 h-12 text-danger-600 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-danger-800 mb-2",children:"Error"}),(0,t.jsx)("p",{className:"text-danger-600 mb-4",children:f}),(0,t.jsxs)(n.z,{onClick:O,variant:"outline",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]})})}):(0,t.jsxs)(i.Zb,{className:"w-full",children:[(0,t.jsxs)(i.Ol,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.ll,{className:"flex items-center",children:[(0,t.jsx)(b.Z,{className:"w-5 h-5 mr-2"}),"Lista de Transacciones"]}),(0,t.jsxs)(i.SZ,{children:[j.length," de ",m.length," transacciones"]})]}),(0,t.jsxs)(n.z,{onClick:O,disabled:N,variant:"outline",size:"sm",children:[N?(0,t.jsx)(d.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Actualizar"]})]}),a&&(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar por cliente, servicio o ID...",value:E,onChange:e=>z(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(w.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("select",{value:G,onChange:e=>Y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"all",children:"Todos los estados"}),(0,t.jsx)("option",{value:"pendiente",children:"Pendiente"}),(0,t.jsx)("option",{value:"aprobado",children:"Aprobado"}),(0,t.jsx)("option",{value:"liberado",children:"Liberado"}),(0,t.jsx)("option",{value:"rechazado",children:"Rechazado"}),(0,t.jsx)("option",{value:"cancelado",children:"Cancelado"})]})]})]})]}),(0,t.jsx)(i.aY,{children:0===j.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(b.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:0===m.length?"No hay transacciones":"No se encontraron resultados"}),(0,t.jsx)("p",{className:"text-gray-600",children:0===m.length?"A\xfan no has recibido pagos":"Intenta ajustar los filtros de b\xfasqueda"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"hidden md:grid grid-cols-12 gap-4 p-3 bg-gray-50 rounded-lg font-medium text-sm text-gray-700",children:[(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsxs)("button",{onClick:()=>U("date"),className:"flex items-center hover:text-gray-900",children:["Fecha","date"===T&&("asc"===M?(0,t.jsx)(Z.Z,{className:"w-4 h-4 ml-1"}):(0,t.jsx)(C.Z,{className:"w-4 h-4 ml-1"}))]})}),(0,t.jsx)("div",{className:"col-span-4",children:"Cliente / Servicio"}),(0,t.jsx)("div",{className:"col-span-2",children:"Estado"}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsxs)("button",{onClick:()=>U("amount"),className:"flex items-center hover:text-gray-900",children:["Monto","amount"===T&&("asc"===M?(0,t.jsx)(Z.Z,{className:"w-4 h-4 ml-1"}):(0,t.jsx)(C.Z,{className:"w-4 h-4 ml-1"}))]})}),(0,t.jsx)("div",{className:"col-span-1",children:"Acciones"})]}),j.map(e=>{var s,a,l,i,r,d,o,x;return(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"md:hidden p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("liberado"===e.estado?"bg-success-500":"aprobado"===e.estado?"bg-primary-500":"pendiente"===e.estado?"bg-warning-500":"bg-danger-500")}),(0,t.jsx)("span",{className:"text-sm font-medium ".concat((0,c.Dx)(e.estado)),children:(0,c.Ny)(e.estado)})]}),(0,t.jsx)("span",{className:"text-lg font-semibold text-success-600",children:(0,c.xG)(e.monto_profesional)})]}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Cliente:"})," ",null===(s=e.servicio)||void 0===s?void 0:s.cliente.nombre]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Servicio:"})," ",null===(a=e.servicio)||void 0===a?void 0:a.descripcion]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Fecha:"})," ",(0,c.o0)(e.creado_en)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"ID:"})," ",e.id]})]}),(0,t.jsxs)("div",{className:"flex space-x-2 mt-3",children:[(0,t.jsxs)(n.z,{onClick:()=>I(e.id),variant:"outline",size:"sm",className:"flex-1",children:[(0,t.jsx)(S.Z,{className:"w-4 h-4 mr-2"}),"Detalles"]}),"aprobado"===e.estado||"liberado"===e.estado?(0,t.jsxs)(n.z,{onClick:()=>A(e.id),variant:"outline",size:"sm",className:"flex-1",children:[(0,t.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),"Recibo"]}):null]})]}),(0,t.jsxs)("div",{className:"hidden md:grid grid-cols-12 gap-4 p-4 items-center",children:[(0,t.jsx)("div",{className:"col-span-3 text-sm text-gray-600",children:(0,c.o0)(e.creado_en)}),(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:null===(l=e.servicio)||void 0===l?void 0:l.cliente.nombre}),(0,t.jsx)("div",{className:"text-sm text-gray-600 truncate",children:null===(i=e.servicio)||void 0===i?void 0:i.descripcion})]}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((0,c.Dx)(e.estado)),children:(0,c.Ny)(e.estado)})}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-success-600",children:(0,c.xG)(e.monto_profesional)}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:["Comisi\xf3n: ",(0,c.xG)(e.comision_plataforma)]})]}),(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsx)(n.z,{onClick:()=>I(e.id),variant:"ghost",size:"sm",children:(0,t.jsx)(S.Z,{className:"w-4 h-4"})})})]}),D===e.id&&(0,t.jsxs)("div",{className:"border-t bg-gray-50 p-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Detalles del Pago"}),(0,t.jsxs)("dl",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-600",children:"ID de Pago:"}),(0,t.jsx)("dd",{className:"font-mono text-xs",children:e.id})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-600",children:"Monto Total:"}),(0,t.jsx)("dd",{className:"font-medium",children:(0,c.xG)(e.monto_total)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-600",children:"Comisi\xf3n Plataforma:"}),(0,t.jsx)("dd",{children:(0,c.xG)(e.comision_plataforma)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-600",children:"Monto Profesional:"}),(0,t.jsx)("dd",{className:"font-medium text-success-600",children:(0,c.xG)(e.monto_profesional)})]}),e.commission_setting&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-600",children:"Tasa de Comisi\xf3n:"}),(0,t.jsxs)("dd",{children:[e.commission_setting.porcentaje,"%"]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Informaci\xf3n del Servicio"}),(0,t.jsxs)("dl",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-600",children:"Cliente:"}),(0,t.jsx)("dd",{children:null===(r=e.servicio)||void 0===r?void 0:r.cliente.nombre})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-600",children:"Email:"}),(0,t.jsx)("dd",{className:"text-xs",children:null===(d=e.servicio)||void 0===d?void 0:d.cliente.email})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-600",children:"Servicio:"}),(0,t.jsx)("dd",{children:null===(o=e.servicio)||void 0===o?void 0:o.descripcion})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-600",children:"Urgente:"}),(0,t.jsx)("dd",{children:(null===(x=e.servicio)||void 0===x?void 0:x.es_urgente)?"S\xed":"No"})]})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t",children:"aprobado"===e.estado||"liberado"===e.estado?(0,t.jsxs)(n.z,{onClick:()=>A(e.id),variant:"outline",size:"sm",children:[(0,t.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),"Descargar Comprobante"]}):null})]})]},e.id)})]})})]})}function D(){var e,s;let[a,r]=(0,l.useState)("dashboard"),c=[{id:"dashboard",label:"Dashboard",icon:u.Z,description:"Vista general de tus ingresos y payouts"},{id:"earnings",label:"Resumen de Ganancias",icon:j.Z,description:"An\xe1lisis detallado de tus ganancias"},{id:"transactions",label:"Transacciones",icon:b.Z,description:"Lista completa de tus pagos y transacciones"}];return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Pagos - Profesional"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Gestiona tus ingresos, comisiones y retiros"})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("div",{className:"flex space-x-1 bg-white p-1 rounded-lg shadow-sm",children:c.map(e=>{let s=e.icon,l=a===e.id;return(0,t.jsxs)(n.z,{variant:l?"default":"ghost",onClick:()=>r(e.id),className:"flex-1 justify-start",children:[(0,t.jsx)(s,{className:"w-4 h-4 mr-2"}),e.label]},e.id)})})}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(i.Zb,{children:(0,t.jsx)(i.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(()=>{let e=c.find(e=>e.id===a),s=(null==e?void 0:e.icon)||p.Z;return(0,t.jsx)(s,{className:"w-6 h-6 text-primary-600"})})(),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:null===(e=c.find(e=>e.id===a))||void 0===e?void 0:e.label}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:null===(s=c.find(e=>e.id===a))||void 0===s?void 0:s.description})]})]})})})}),(0,t.jsx)("div",{className:"space-y-6",children:(()=>{switch(a){case"dashboard":return(0,t.jsx)(g,{professionalId:"prof-1"});case"earnings":return(0,t.jsx)(f,{professionalId:"prof-1"});case"transactions":return(0,t.jsx)(P,{professionalId:"prof-1"});default:return null}})()})]})})}}},function(e){e.O(0,[216,592,744],function(){return e(e.s=8034)}),_N_E=e.O()}]);