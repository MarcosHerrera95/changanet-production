(()=>{var e={};e.id=956,e.ids=[956],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},7242:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>o});var t=a(482),r=a(9108),i=a(2563),l=a.n(i),n=a(8300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let o=["",{children:["payments",{children:["client",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3942)),"d:\\modificaciones-front\\app\\payments\\client\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,7968)),"d:\\modificaciones-front\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],d=["d:\\modificaciones-front\\app\\payments\\client\\page.tsx"],x="/payments/client/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/payments/client/page",pathname:"/payments/client",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2955:(e,s,a)=>{Promise.resolve().then(a.bind(a,8731))},8731:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>W});var t=a(5344),r=a(3729),i=a(708),l=a(5697),n=a(2374),c=a(1351),o=a(6212),d=a(2549),x=a(8117),m=a(8448),u=a(7060),h=a(9224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,h.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var j=a(6138),g=a(2739);let f=n.Ry({serviceId:n.Z_().min(1,"Debe seleccionar un servicio"),amount:n.Rx().min(1,"El monto debe ser mayor a 0").max(1e6,"Monto m\xe1ximo excedido")});function b({service:e,onSuccess:s,onCancel:a}){let[n,h]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),[v,N]=(0,r.useState)(null),[w,k]=(0,r.useState)(null),{register:C,handleSubmit:Z,watch:_,setValue:S,formState:{errors:z}}=(0,i.cI)({resolver:(0,l.F)(f),defaultValues:{serviceId:e?.id||"",amount:e?.profesional?.perfil_profesional?.tarifa_hora||0}}),M=_("amount");_("serviceId"),(0,r.useEffect)(()=>{M&&M>0&&q(M)},[M,q]),(0,r.useEffect)(()=>{e?.id&&(S("serviceId",e.id),e.profesional?.perfil_profesional?.tarifa_hora&&S("amount",e.profesional.perfil_profesional.tarifa_hora))},[e,S]);let P=(0,r.useCallback)(async s=>{try{let a=await x.aU.calculateCommission(s,e?.tipo_servicio);a.data.success&&y(a.data.data)}catch(e){console.error("Error calculating commission:",e)}},[e?.tipo_servicio]),q=(0,r.useCallback)(function(e,s,a=!1){let t=null;return(...s)=>{let r=a&&!t;t&&clearTimeout(t),t=setTimeout(()=>{t=null,a||e(...s)},500),r&&e(...s)}}(P,0),[P]),E=async e=>{h(!0),k(null);try{let a=await x.ST.createPreference(e.serviceId,e.amount);if(a.data.success){let e=a.data.data;N(e.init_point),window.open(e.init_point,"_blank"),s&&s(a.data.data.paymentId)}else k(a.data.error||"Error al crear la preferencia de pago")}catch(e){k(e.response?.data?.error||"Error interno del servidor")}finally{h(!1)}};return v?(0,t.jsxs)(c.Zb,{className:"w-full max-w-md mx-auto",children:[(0,t.jsxs)(c.Ol,{className:"text-center",children:[t.jsx("div",{className:"mx-auto w-12 h-12 bg-success-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(u.Z,{className:"w-6 h-6 text-success-600"})}),t.jsx(c.ll,{className:"text-success-800",children:"Pago Iniciado"}),t.jsx(c.SZ,{children:"Se ha abierto MercadoPago en una nueva ventana para completar el pago."})]}),(0,t.jsxs)(c.aY,{className:"space-y-4",children:[(0,t.jsxs)(o.z,{onClick:()=>window.open(v,"_blank"),className:"w-full",variant:"outline",children:[t.jsx(p,{className:"w-4 h-4 mr-2"}),"Reabrir MercadoPago"]}),t.jsx(o.z,{onClick:a,variant:"ghost",className:"w-full",children:"Volver"})]})]}):(0,t.jsxs)(c.Zb,{className:"w-full max-w-md mx-auto",children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsxs)(c.ll,{className:"flex items-center",children:[t.jsx(p,{className:"w-5 h-5 mr-2"}),"Checkout de Pago"]}),t.jsx(c.SZ,{children:"Complete los detalles para procesar el pago del servicio"})]}),t.jsx(c.aY,{children:(0,t.jsxs)("form",{onSubmit:Z(E),className:"space-y-4",children:[e&&(0,t.jsxs)("div",{className:"p-4 bg-secondary-50 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-secondary-900",children:e.descripcion}),(0,t.jsxs)("p",{className:"text-sm text-secondary-600",children:["Profesional: ",e.profesional.nombre]}),e.es_urgente&&t.jsx("p",{className:"text-sm text-warning-600 font-medium",children:"âš¡ Servicio urgente (+20% adicional)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"amount",className:"text-sm font-medium",children:"Monto a pagar"}),t.jsx(d.I,{id:"amount",type:"number",placeholder:"Ingrese el monto",...C("amount",{valueAsNumber:!0}),className:(0,m.cn)(z.amount&&"border-danger-500")}),z.amount&&(0,t.jsxs)("p",{className:"text-sm text-danger-600 flex items-center",children:[t.jsx(j.Z,{className:"w-4 h-4 mr-1"}),z.amount.message]})]}),b&&(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[t.jsx("h4",{className:"font-medium text-sm",children:"Desglose del pago"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Monto base:"}),t.jsx("span",{children:(0,m.xG)(b.originalAmount)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-danger-600",children:[(0,t.jsxs)("span",{children:["Comisi\xf3n (",b.commissionPercentage,"%):"]}),(0,t.jsxs)("span",{children:["-",(0,m.xG)(b.commissionAmount)]})]}),t.jsx("hr",{className:"my-2"}),(0,t.jsxs)("div",{className:"flex justify-between font-medium",children:[t.jsx("span",{children:"Total a pagar:"}),t.jsx("span",{children:(0,m.xG)(b.originalAmount)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-success-600",children:[t.jsx("span",{children:"Profesional recibe:"}),t.jsx("span",{children:(0,m.xG)(b.professionalAmount)})]})]})]}),w&&t.jsx("div",{className:"p-4 bg-danger-50 border border-danger-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-danger-800 flex items-center",children:[t.jsx(j.Z,{className:"w-4 h-4 mr-2"}),w]})}),(0,t.jsxs)("div",{className:"flex space-x-3 pt-4",children:[t.jsx(o.z,{type:"submit",disabled:n,className:"flex-1",children:n?(0,t.jsxs)(t.Fragment,{children:[t.jsx(g.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Procesando..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(p,{className:"w-4 h-4 mr-2"}),"Pagar con MercadoPago"]})}),a&&t.jsx(o.z,{type:"button",variant:"outline",onClick:a,children:"Cancelar"})]})]})})]})}var y=a(3229),v=a(5545),N=a(3733),w=a(6885);function k({paymentId:e,onStatusChange:s,showActions:a=!0}){let[i,l]=(0,r.useState)(null),[n,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0),[f,b]=(0,r.useState)(!1),[k,C]=(0,r.useState)(null);(0,r.useEffect)(()=>{Z()},[e]),(0,r.useEffect)(()=>{let a=localStorage.getItem("userId");if(a){x.CZ.connect(a);let t=a=>{let t=a.detail;t.paymentId===e&&(d(t.status),s&&s(t.status),Z())};return window.addEventListener("paymentStatusUpdate",t),()=>{window.removeEventListener("paymentStatusUpdate",t),x.CZ.disconnect()}}},[e,s]);let Z=async()=>{try{b(!0);let s=await x.ST.getPaymentStatus(e);s.data.success?(l(s.data.data.payment),d(s.data.data),C(null)):C(s.data.error||"Error al cargar el estado del pago")}catch(e){C(e.response?.data?.error||"Error interno del servidor")}finally{p(!1),b(!1)}},_=async()=>{try{let s=await x.ST.generateReceipt(e);s.data.success&&window.open(s.data.data.receiptUrl,"_blank")}catch(e){C("Error al generar el comprobante")}};return h?t.jsx(c.Zb,{className:"w-full max-w-md mx-auto",children:(0,t.jsxs)(c.aY,{className:"flex items-center justify-center py-8",children:[t.jsx(g.Z,{className:"w-6 h-6 animate-spin mr-2"}),t.jsx("span",{children:"Cargando estado del pago..."})]})}):k?t.jsx(c.Zb,{className:"w-full max-w-md mx-auto",children:t.jsx(c.aY,{className:"py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx(j.Z,{className:"w-12 h-12 text-danger-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-danger-800 mb-2",children:"Error"}),t.jsx("p",{className:"text-danger-600 mb-4",children:k}),(0,t.jsxs)(o.z,{onClick:Z,variant:"outline",children:[t.jsx(N.Z,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]})})}):n&&i?(0,t.jsxs)(c.Zb,{className:"w-full max-w-md mx-auto",children:[(0,t.jsxs)(c.Ol,{className:"text-center",children:[t.jsx("div",{className:"mx-auto mb-4",children:(e=>{switch(e){case"approved":return t.jsx(u.Z,{className:"w-6 h-6 text-success-600"});case"rejected":case"cancelled":return t.jsx(y.Z,{className:"w-6 h-6 text-danger-600"});case"pending":return t.jsx(v.Z,{className:"w-6 h-6 text-warning-600"});default:return t.jsx(j.Z,{className:"w-6 h-6 text-gray-600"})}})(n.status)}),t.jsx(c.ll,{className:`text-xl ${(0,m.Dx)(n.status)}`,children:(0,m.Ny)(n.status)}),t.jsx(c.SZ,{children:(e=>{switch(e){case"approved":return"Pago aprobado exitosamente";case"rejected":return"Pago rechazado";case"cancelled":return"Pago cancelado";case"pending":return"Pago pendiente de aprobaci\xf3n";default:return"Estado desconocido"}})(n.status)})]}),(0,t.jsxs)(c.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ID de Pago:"}),t.jsx("span",{className:"text-sm font-mono",children:e})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Monto:"}),t.jsx("span",{className:"text-sm font-medium",children:(0,m.xG)(i.monto_total)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Fecha:"}),t.jsx("span",{className:"text-sm",children:(0,m.o0)(i.creado_en)})]}),n.date_approved&&(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Aprobado:"}),t.jsx("span",{className:"text-sm",children:(0,m.o0)(n.date_approved)})]}),i.commission_setting&&(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Comisi\xf3n:"}),(0,t.jsxs)("span",{className:"text-sm",children:[i.commission_setting.porcentaje,"% (",(0,m.xG)(i.comision_plataforma),")"]})]})]}),i.servicio&&(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-sm mb-1",children:"Servicio"}),t.jsx("p",{className:"text-sm text-gray-600",children:i.servicio.descripcion}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Profesional: ",i.servicio.profesional.nombre]})]}),a&&(0,t.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,t.jsxs)(o.z,{onClick:()=>Z(),disabled:f,variant:"outline",size:"sm",className:"flex-1",children:[f?t.jsx(g.Z,{className:"w-4 h-4 mr-2 animate-spin"}):t.jsx(N.Z,{className:"w-4 h-4 mr-2"}),"Actualizar"]}),"approved"===n.status&&(0,t.jsxs)(o.z,{onClick:_,variant:"outline",size:"sm",className:"flex-1",children:[t.jsx(w.Z,{className:"w-4 h-4 mr-2"}),"Comprobante"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center text-xs text-gray-500 pt-2",children:[t.jsx("div",{className:"w-2 h-2 bg-success-500 rounded-full mr-2 animate-pulse"}),"Actualizaci\xf3n en tiempo real"]})]})]}):t.jsx(c.Zb,{className:"w-full max-w-md mx-auto",children:t.jsx(c.aY,{className:"py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx(j.Z,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium mb-2",children:"Pago no encontrado"}),t.jsx("p",{className:"text-gray-600",children:"No se pudo encontrar informaci\xf3n del pago"})]})})})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,h.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var Z=a(2704),_=a(5390);function S({clientId:e,limit:s=10,showDetails:a=!0}){let[i,l]=(0,r.useState)([]),[n,d]=(0,r.useState)(!0),[u,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[b,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{v()},[e]);let v=async()=>{try{h(!0);let s=await x.ST.getClientPayments(e);s.data.success?(l(s.data.data),f(null)):f(s.data.error||"Error al cargar el historial de pagos")}catch(e){f(e.response?.data?.error||"Error interno del servidor")}finally{d(!1),h(!1)}},k=async e=>{try{let s=await x.ST.generateReceipt(e);s.data.success&&window.open(s.data.data.receiptUrl,"_blank")}catch(e){f("Error al generar el comprobante")}},S=e=>{y(b===e?null:e)};return n?t.jsx(c.Zb,{className:"w-full",children:(0,t.jsxs)(c.aY,{className:"flex items-center justify-center py-8",children:[t.jsx(g.Z,{className:"w-6 h-6 animate-spin mr-2"}),t.jsx("span",{children:"Cargando historial de pagos..."})]})}):p?t.jsx(c.Zb,{className:"w-full",children:t.jsx(c.aY,{className:"py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx(j.Z,{className:"w-12 h-12 text-danger-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-danger-800 mb-2",children:"Error"}),t.jsx("p",{className:"text-danger-600 mb-4",children:p}),(0,t.jsxs)(o.z,{onClick:v,variant:"outline",children:[t.jsx(N.Z,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]})})}):(0,t.jsxs)(c.Zb,{className:"w-full",children:[t.jsx(c.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.ll,{className:"flex items-center",children:[t.jsx(C,{className:"w-5 h-5 mr-2"}),"Historial de Pagos"]}),(0,t.jsxs)(c.SZ,{children:[i.length," pago",1!==i.length?"s":""," realizado",1!==i.length?"s":""]})]}),(0,t.jsxs)(o.z,{onClick:v,disabled:u,variant:"outline",size:"sm",children:[u?t.jsx(g.Z,{className:"w-4 h-4 mr-2 animate-spin"}):t.jsx(N.Z,{className:"w-4 h-4 mr-2"}),"Actualizar"]})]})}),t.jsx(c.aY,{children:0===i.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx(C,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay pagos"}),t.jsx("p",{className:"text-gray-600",children:"A\xfan no has realizado ning\xfan pago"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[i.slice(0,s).map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:`w-3 h-3 rounded-full ${"liberado"===e.estado?"bg-success-500":"aprobado"===e.estado?"bg-primary-500":"pendiente"===e.estado?"bg-warning-500":"bg-danger-500"}`})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.servicio?.descripcion||"Servicio"}),t.jsx("p",{className:"text-xs text-gray-600",children:(0,m.p6)(e.creado_en)})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("p",{className:"text-lg font-semibold",children:(0,m.xG)(e.monto_total)}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(0,m.Dx)(e.estado)}`,children:(0,m.Ny)(e.estado)})]})]}),a&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)(o.z,{onClick:()=>S(e.id),variant:"ghost",size:"sm",className:"w-full justify-between",children:[t.jsx("span",{children:"Ver detalles"}),b===e.id?t.jsx(Z.Z,{className:"w-4 h-4"}):t.jsx(_.Z,{className:"w-4 h-4"})]}),b===e.id&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg space-y-2",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-600",children:"ID de Pago:"}),t.jsx("p",{className:"font-mono text-xs",children:e.id})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Profesional:"}),t.jsx("p",{children:e.servicio?.profesional.nombre})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Monto Total:"}),t.jsx("p",{className:"font-medium",children:(0,m.xG)(e.monto_total)})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Comisi\xf3n:"}),t.jsx("p",{children:(0,m.xG)(e.comision_plataforma)})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Profesional Recibe:"}),t.jsx("p",{className:"font-medium text-success-600",children:(0,m.xG)(e.monto_profesional)})]}),e.commission_setting&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Tasa de Comisi\xf3n:"}),(0,t.jsxs)("p",{children:[e.commission_setting.porcentaje,"%"]})]})]}),t.jsx("div",{className:"flex space-x-2 pt-3 border-t",children:(0,t.jsxs)(o.z,{onClick:()=>k(e.id),variant:"outline",size:"sm",disabled:"aprobado"!==e.estado&&"liberado"!==e.estado,children:[t.jsx(w.Z,{className:"w-4 h-4 mr-2"}),"Comprobante"]})})]})]})]},e.id)),i.length>s&&t.jsx("div",{className:"text-center pt-4",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Mostrando ",s," de ",i.length," pagos"]})})]})})]})}var z=a(3024),M=a(3037),P=a(4718),q=a(1626);let E=({onClick:e,className:s,showBadge:a=!0,size:i="md"})=>{let{unreadCount:l,isConnected:n}=(0,P.useNotifications)(),[c,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(l>0){o(!0);let e=setTimeout(()=>o(!1),1e3);return()=>clearTimeout(e)}},[l]),(0,t.jsxs)("button",{onClick:()=>{e&&e()},className:(0,q.cn)("relative p-2 rounded-full hover:bg-gray-100 transition-colors","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",s),"aria-label":`Notificaciones ${l>0?`(${l} sin leer)`:""}`,children:[t.jsx(M.Z,{className:(0,q.cn)({sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[i],"transition-transform duration-200",c&&"animate-bounce",!n&&"text-gray-400")}),!n&&t.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"}),a&&l>0&&t.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-medium",children:l>99?"99+":l}),l>0&&t.jsx("div",{className:"absolute inset-0 rounded-full bg-red-500 opacity-20 animate-ping"})]})},A=(0,h.Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var T=a(4513),G=a(7418),I=a(3746);let R=({isOpen:e,onClose:s,onOpenPreferences:a,className:i})=>{let{notifications:l,unreadCount:n,loading:c,markAsRead:o,markAllAsRead:d,fetchNotifications:x}=(0,P.useNotifications)(),[m,u]=(0,r.useState)("all"),[h,p]=(0,r.useState)("all"),j=(0,r.useRef)(null);(0,r.useEffect)(()=>{let a=e=>{j.current&&!j.current.contains(e.target)&&s()};return e&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[e,s]),(0,r.useEffect)(()=>{e&&x({filter:m,priority:"all"===h?void 0:h})},[e,m,h,x]);let g=async e=>{try{await o(e)}catch(e){console.error("Failed to mark notification as read:",e)}},f=async()=>{try{await d()}catch(e){console.error("Failed to mark all notifications as read:",e)}},b=e=>{let s={critical:"border-red-500 bg-red-50",high:"border-orange-500 bg-orange-50",medium:"border-yellow-500 bg-yellow-50",low:"border-gray-500 bg-gray-50"};return s[e]||s.medium},y=e=>{let s=new Date,a=new Date(e),t=s.getTime()-a.getTime(),r=Math.floor(t/6e4),i=Math.floor(t/36e5);return r<1?"Ahora":r<60?`Hace ${r}m`:i<24?`Hace ${i}h`:`Hace ${Math.floor(t/864e5)}d`};return e?(0,t.jsxs)("div",{ref:j,className:(0,q.cn)("absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border z-50 max-h-[80vh] overflow-hidden",i),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(M.Z,{className:"w-5 h-5"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"Notificaciones"}),n>0&&t.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:n})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:f,disabled:0===n,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-50",title:"Marcar todas como le\xeddas",children:t.jsx(A,{className:"w-4 h-4"})}),t.jsx("button",{onClick:s,className:"p-1 hover:bg-gray-200 rounded",children:t.jsx(T.Z,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-3 border-b bg-gray-50",children:[t.jsx(G.Z,{className:"w-4 h-4 text-gray-500"}),(0,t.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"text-sm border rounded px-2 py-1 bg-white",children:[t.jsx("option",{value:"all",children:"Todas"}),t.jsx("option",{value:"unread",children:"No le\xeddas"}),t.jsx("option",{value:"read",children:"Le\xeddas"})]}),(0,t.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"text-sm border rounded px-2 py-1 bg-white",children:[t.jsx("option",{value:"all",children:"Todas las prioridades"}),t.jsx("option",{value:"critical",children:"Cr\xedticas"}),t.jsx("option",{value:"high",children:"Altas"}),t.jsx("option",{value:"medium",children:"Medias"}),t.jsx("option",{value:"low",children:"Bajas"})]})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:c?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):0===l.length?(0,t.jsxs)("div",{className:"text-center p-8 text-gray-500",children:[t.jsx(M.Z,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No hay notificaciones"})]}):t.jsx("div",{className:"divide-y",children:l.map(e=>t.jsx("div",{className:(0,q.cn)("p-4 hover:bg-gray-50 cursor-pointer transition-colors",!e.esta_leido&&"bg-blue-50"),onClick:()=>g(e.id),children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:(0,q.cn)("w-2 h-2 rounded-full mt-2 flex-shrink-0",e.esta_leido?"bg-gray-300":"bg-blue-500")}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.titulo}),t.jsx("span",{className:(0,q.cn)("px-2 py-0.5 text-xs rounded-full border",b(e.prioridad)),children:e.prioridad})]}),t.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.mensaje}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:y(e.creado_en)}),!e.esta_leido&&t.jsx("button",{onClick:s=>{s.stopPropagation(),g(e.id)},className:"text-xs text-blue-600 hover:text-blue-800",children:"Marcar como le\xedda"})]})]})]})},e.id))})}),t.jsx("div",{className:"p-3 border-t bg-gray-50",children:(0,t.jsxs)("button",{onClick:a,className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-800 w-full",children:[t.jsx(I.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Configurar notificaciones"})]})})]}):null},D=(0,h.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var H=a(8765);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let $=(0,h.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),L=({isOpen:e,onClose:s,onOpenPreferences:a})=>{let{notifications:i,unreadCount:l,loading:n,markAsRead:c,markAllAsRead:o,fetchNotifications:d}=(0,P.useNotifications)(),[x,m]=(0,r.useState)("all"),[u,h]=(0,r.useState)("all"),[p,j]=(0,r.useState)("all"),[g,f]=(0,r.useState)(""),[b,y]=(0,r.useState)(new Set),[v,N]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&d({filter:x,priority:"all"===u?void 0:u,type:"all"===p?void 0:p})},[e,x,u,p,d]),(0,r.useEffect)(()=>{e||(y(new Set),N(!1),f(""))},[e]);let w=async e=>{try{await c(e)}catch(e){console.error("Failed to mark notification as read:",e)}},k=async()=>{try{await o()}catch(e){console.error("Failed to mark all notifications as read:",e)}},C=async()=>{for(let e of Array.from(b))await w(e);y(new Set),N(!1)},Z=e=>{let s=new Set(b);s.has(e)?s.delete(e):s.add(e),y(s),N(s.size>0)},_=i.filter(e=>""===g||e.titulo.toLowerCase().includes(g.toLowerCase())||e.mensaje.toLowerCase().includes(g.toLowerCase())),S=e=>{let s={critical:"border-red-500 bg-red-50 text-red-700",high:"border-orange-500 bg-orange-50 text-orange-700",medium:"border-yellow-500 bg-yellow-50 text-yellow-700",low:"border-gray-500 bg-gray-50 text-gray-700"};return s[e]||s.medium},z=e=>{let s=new Date,a=new Date(e),t=s.getTime()-a.getTime(),r=Math.floor(t/6e4),i=Math.floor(t/36e5),l=Math.floor(t/864e5);return r<1?"Ahora":r<60?`Hace ${r}m`:i<24?`Hace ${i}h`:l<7?`Hace ${l}d`:a.toLocaleDateString()};return e?t.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-4 bg-black bg-opacity-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(M.Z,{className:"w-6 h-6"}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Centro de Notificaciones"}),t.jsx("p",{className:"text-sm text-gray-600",children:l>0?`${l} sin leer`:"Todas le\xeddas"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[v&&t.jsx("div",{className:"flex items-center space-x-2 mr-4",children:(0,t.jsxs)("button",{onClick:C,className:"flex items-center space-x-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:[t.jsx(D,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["Marcar como le\xeddas (",b.size,")"]})]})}),t.jsx("button",{onClick:k,disabled:0===l,className:"p-2 hover:bg-gray-100 rounded disabled:opacity-50",title:"Marcar todas como le\xeddas",children:t.jsx(A,{className:"w-5 h-5"})}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Configurar notificaciones",children:t.jsx(I.Z,{className:"w-5 h-5"})}),t.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded",children:t.jsx(T.Z,{className:"w-5 h-5"})})]})]}),t.jsx("div",{className:"p-4 border-b bg-gray-50",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx(H.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar notificaciones...",value:g,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(G.Z,{className:"w-4 h-4 text-gray-500"}),(0,t.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"border rounded px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"Todas"}),t.jsx("option",{value:"unread",children:"No le\xeddas"}),t.jsx("option",{value:"read",children:"Le\xeddas"})]}),(0,t.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"border rounded px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"Todas las prioridades"}),t.jsx("option",{value:"critical",children:"Cr\xedticas"}),t.jsx("option",{value:"high",children:"Altas"}),t.jsx("option",{value:"medium",children:"Medias"}),t.jsx("option",{value:"low",children:"Bajas"})]}),(0,t.jsxs)("select",{value:p,onChange:e=>j(e.target.value),className:"border rounded px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"Todos los tipos"}),t.jsx("option",{value:"mensaje",children:"Mensajes"}),t.jsx("option",{value:"cotizacion",children:"Cotizaciones"}),t.jsx("option",{value:"servicio",children:"Servicios"}),t.jsx("option",{value:"pago",children:"Pagos"}),t.jsx("option",{value:"sistema",children:"Sistema"})]})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("button",{onClick:()=>{b.size===i.length?(y(new Set),N(!1)):(y(new Set(i.map(e=>e.id))),N(!0))},className:"px-3 py-2 text-sm border rounded hover:bg-gray-100",children:b.size===i.length?"Deseleccionar todo":"Seleccionar todo"})})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto max-h-[60vh]",children:n?t.jsx("div",{className:"flex items-center justify-center p-12",children:t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):0===_.length?(0,t.jsxs)("div",{className:"text-center p-12 text-gray-500",children:[t.jsx(M.Z,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),t.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay notificaciones"}),t.jsx("p",{children:"Las notificaciones aparecer\xe1n aqu\xed cuando las recibas."})]}):t.jsx("div",{className:"divide-y",children:_.map(e=>t.jsx("div",{className:(0,q.cn)("p-4 hover:bg-gray-50 transition-colors border-l-4",!e.esta_leido&&"bg-blue-50",b.has(e.id)&&"bg-blue-100","critical"===e.prioridad&&"border-red-500","high"===e.prioridad&&"border-orange-500","medium"===e.prioridad&&"border-yellow-500","low"===e.prioridad&&"border-gray-500"),children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[t.jsx("input",{type:"checkbox",checked:b.has(e.id),onChange:()=>Z(e.id),className:"mt-1"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.titulo}),t.jsx("span",{className:(0,q.cn)("px-2 py-1 text-xs rounded-full border",S(e.prioridad)),children:e.prioridad}),t.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:e.tipo})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:e.mensaje}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-500",children:z(e.creado_en)}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[!e.esta_leido&&t.jsx("button",{onClick:()=>w(e.id),className:"text-xs text-blue-600 hover:text-blue-800",children:"Marcar como le\xedda"}),t.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",children:t.jsx($,{className:"w-4 h-4"})})]})]})]})]})},e.id))})})]})}):null},F=(0,h.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Y=(0,h.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var O=a(8852),B=a(1498);let U=({isOpen:e,onClose:s})=>{let{preferences:a,fetchPreferences:i,updatePreferences:l}=(0,P.useNotifications)(),[n,c]=(0,r.useState)({}),[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&!a&&i().catch(console.error)},[e,a,i]),(0,r.useEffect)(()=>{a&&c({...a})},[a]);let u=async()=>{m(!0);try{await l(n),s()}catch(e){console.error("Failed to save preferences:",e)}finally{m(!1)}},h=(e,s)=>{c(a=>({...a,[e]:s}))},p=(e,s)=>{c(a=>({...a,canales:{...a.canales,[e]:s}}))},j=(e,s,a)=>{c(t=>({...t,categorias:{...t.categorias,[e]:{...t.categorias?.[e],[s]:a}}}))},g=[{value:"push",label:"Push",icon:t.jsx(F,{className:"w-4 h-4"})},{value:"email",label:"Email",icon:t.jsx(Y,{className:"w-4 h-4"})},{value:"sms",label:"SMS",icon:t.jsx(O.Z,{className:"w-4 h-4"})},{value:"in_app",label:"En App",icon:t.jsx(M.Z,{className:"w-4 h-4"})}];return e?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(I.Z,{className:"w-6 h-6"}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Preferencias de Notificaciones"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Configura c\xf3mo quieres recibir tus notificaciones"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("button",{onClick:u,disabled:x,className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:[t.jsx(B.Z,{className:"w-4 h-4"}),t.jsx("span",{children:x?"Guardando...":"Guardar"})]}),t.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded",children:t.jsx(T.Z,{className:"w-5 h-5"})})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto max-h-[70vh] p-6",children:o?t.jsx("div",{className:"flex items-center justify-center p-12",children:t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Configuraci\xf3n General"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zona Horaria"}),(0,t.jsxs)("select",{value:n.timezone||"America/Buenos_Aires",onChange:e=>h("timezone",e.target.value),className:"w-full border rounded px-3 py-2",children:[t.jsx("option",{value:"America/Buenos_Aires",children:"Buenos Aires (GMT-3)"}),t.jsx("option",{value:"America/Sao_Paulo",children:"S\xe3o Paulo (GMT-3)"}),t.jsx("option",{value:"America/Mexico_City",children:"Ciudad de M\xe9xico (GMT-6)"}),t.jsx("option",{value:"America/New_York",children:"Nueva York (GMT-5)"}),t.jsx("option",{value:"Europe/Madrid",children:"Madrid (GMT+1)"}),t.jsx("option",{value:"Europe/London",children:"Londres (GMT+0)"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frecuencia de Resumen"}),(0,t.jsxs)("select",{value:n.summary_frequency||"immediate",onChange:e=>h("summary_frequency",e.target.value),className:"w-full border rounded px-3 py-2",children:[t.jsx("option",{value:"immediate",children:"Inmediato"}),t.jsx("option",{value:"hourly",children:"Cada hora"}),t.jsx("option",{value:"daily",children:"Diario"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:!1!==n.enabled,onChange:e=>h("enabled",e.target.checked),className:"rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Notificaciones habilitadas"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:!1!==n.group_similar,onChange:e=>h("group_similar",e.target.checked),className:"rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Agrupar notificaciones similares"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:!1!==n.sound_enabled,onChange:e=>h("sound_enabled",e.target.checked),className:"rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Sonido habilitado"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center space-x-2",children:[t.jsx(v.Z,{className:"w-5 h-5"}),t.jsx("span",{children:"Horas de Silencio"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:n.quiet_hours_enabled||!1,onChange:e=>h("quiet_hours_enabled",e.target.checked),className:"rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Habilitar horas de silencio"})]}),n.quiet_hours_enabled&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ml-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora de Inicio"}),t.jsx("input",{type:"time",value:n.quiet_start_time||"22:00",onChange:e=>h("quiet_start_time",e.target.value),className:"border rounded px-3 py-2"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora de Fin"}),t.jsx("input",{type:"time",value:n.quiet_end_time||"08:00",onChange:e=>h("quiet_end_time",e.target.value),className:"border rounded px-3 py-2"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Canales de Notificaci\xf3n"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:g.map(e=>(0,t.jsxs)("label",{className:(0,q.cn)("flex items-center space-x-2 p-3 border rounded cursor-pointer hover:bg-gray-50",n.canales?.[e.value]&&"bg-blue-50 border-blue-200"),children:[t.jsx("input",{type:"checkbox",checked:n.canales?.[e.value]||!1,onChange:s=>p(e.value,s.target.checked),className:"rounded"}),e.icon,t.jsx("span",{className:"text-sm font-medium",children:e.label})]},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Categor\xedas de Notificaci\xf3n"}),t.jsx("div",{className:"space-y-4",children:[{value:"mensaje",label:"Mensajes",description:"Mensajes directos y conversaciones"},{value:"cotizacion",label:"Cotizaciones",description:"Solicitudes de presupuesto y ofertas"},{value:"servicio",label:"Servicios",description:"Actualizaciones de servicios y estado"},{value:"pago",label:"Pagos",description:"Confirmaciones y actualizaciones de pago"},{value:"sistema",label:"Sistema",description:"Notificaciones del sistema y mantenimiento"},{value:"urgente",label:"Urgentes",description:"Alertas cr\xedticas y emergencias"},{value:"recordatorio",label:"Recordatorios",description:"Recordatorios de citas y tareas"}].map(e=>(0,t.jsxs)("div",{className:"border rounded p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:e.label}),t.jsx("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:n.categorias?.[e.value]?.enabled!==!1,onChange:s=>j(e.value,"enabled",s.target.checked),className:"rounded"}),t.jsx("span",{className:"text-sm",children:"Habilitado"})]})]}),n.categorias?.[e.value]?.enabled&&t.jsx("div",{className:"ml-4 space-y-2",children:(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridades m\xednimas"}),(0,t.jsxs)("select",{value:n.categorias?.[e.value]?.priority?.[0]||"low",onChange:s=>j(e.value,"priority",[s.target.value]),className:"border rounded px-3 py-1 text-sm",children:[t.jsx("option",{value:"low",children:"Baja o superior"}),t.jsx("option",{value:"medium",children:"Media o superior"}),t.jsx("option",{value:"high",children:"Alta o superior"}),t.jsx("option",{value:"critical",children:"Solo cr\xedticas"})]})]})})]},e.value))})]})]})})]})}):null},V={id:"service-1",descripcion:"Limpieza general del hogar",cliente_id:"client-1",profesional_id:"prof-1",estado:"aceptado",es_urgente:!1,cliente:{id:"client-1",nombre:"Juan P\xe9rez",email:"juan@example.com"},profesional:{id:"prof-1",nombre:"Mar\xeda Gonz\xe1lez",email:"maria@example.com",perfil_profesional:{tarifa_hora:1500}}};function W(){let[e,s]=(0,r.useState)("selection"),[a,i]=(0,r.useState)(null),[l,n]=(0,r.useState)(null),[d,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[j,g]=(0,r.useState)(!1),f=e=>{i(e),s("checkout")},y=e=>{n(e),s("status")},v=[{id:"selection",label:"Seleccionar Servicio",icon:p},{id:"checkout",label:"Checkout",icon:p},{id:"status",label:"Estado del Pago",icon:u.Z},{id:"history",label:"Historial",icon:C}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[t.jsx("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pagos - Cliente"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Gestiona tus pagos y servicios"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx(E,{onClick:()=>x(!d)}),t.jsx(R,{isOpen:d,onClose:()=>x(!1),onOpenPreferences:()=>{x(!1),g(!0)}})]}),"selection"!==e&&(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>s("selection"),children:[t.jsx(z.Z,{className:"w-4 h-4 mr-2"}),"Volver al Inicio"]})]})]})}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-center space-x-4",children:v.map((s,a)=>{let r=s.icon,i=s.id===e,l=v.findIndex(s=>s.id===e)>a;return(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:`
                    flex items-center justify-center w-10 h-10 rounded-full border-2
                    ${i?"border-primary-500 bg-primary-50":""}
                    ${l?"border-success-500 bg-success-500":""}
                    ${i||l?"":"border-gray-300"}
                  `,children:l?t.jsx(u.Z,{className:"w-5 h-5 text-white"}):t.jsx(r,{className:`w-5 h-5 ${i?"text-primary-600":"text-gray-400"}`})}),t.jsx("span",{className:`ml-2 text-sm font-medium ${i?"text-primary-600":"text-gray-600"}`,children:s.label}),a<v.length-1&&t.jsx("div",{className:`w-12 h-0.5 mx-4 ${l?"bg-success-500":"bg-gray-300"}`})]},s.id)})})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:(()=>{switch(e){case"selection":return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Seleccionar Servicio para Pagar"}),t.jsx("p",{className:"text-gray-600",children:"Elige el servicio que deseas pagar"})]}),t.jsx("div",{className:"grid gap-4 max-w-2xl mx-auto",children:t.jsx(c.Zb,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>f(V),children:t.jsx(c.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900",children:V.descripcion}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Profesional: ",V.profesional.nombre]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Tarifa: $",V.profesional.perfil_profesional?.tarifa_hora,"/hora"]})]}),t.jsx(o.z,{children:"Seleccionar"})]})})})})]});case"checkout":return a?t.jsx(b,{service:a,onSuccess:y,onCancel:()=>s("selection")}):null;case"status":return l?t.jsx(k,{paymentId:l,onStatusChange:e=>{"approved"===e.status||e.status}}):null;case"history":return t.jsx(S,{clientId:"client-1"});default:return null}})()}),t.jsx("div",{className:"mt-8 flex justify-center",children:t.jsx("div",{className:"flex space-x-4",children:"history"!==e&&(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>s("history"),children:[t.jsx(C,{className:"w-4 h-4 mr-2"}),"Ver Historial"]})})})]}),t.jsx(L,{isOpen:m,onClose:()=>h(!1),onOpenPreferences:()=>{h(!1),g(!0)}}),t.jsx(U,{isOpen:j,onClose:()=>g(!1)})]})}},6212:(e,s,a)=>{"use strict";a.d(s,{z:()=>l});var t=a(5344),r=a(3729),i=a(8448);let l=r.forwardRef(({className:e,variant:s="default",size:a="default",...r},l)=>t.jsx("button",{className:(0,i.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{default:"bg-primary-600 text-white hover:bg-primary-700",destructive:"bg-danger-600 text-white hover:bg-danger-700",outline:"border border-gray-300 bg-white hover:bg-gray-50",secondary:"bg-secondary-100 text-secondary-900 hover:bg-secondary-200",ghost:"hover:bg-gray-100",link:"underline-offset-4 hover:underline text-primary-600"}[s],{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}[a],e),ref:l,...r}));l.displayName="Button"},1351:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>n,SZ:()=>o,Zb:()=>l,aY:()=>d,ll:()=>c});var t=a(5344),r=a(3729),i=a(8448);let l=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-soft",e),...s}));l.displayName="Card";let n=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let o=r.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},2549:(e,s,a)=>{"use strict";a.d(s,{I:()=>l});var t=a(5344),r=a(3729),i=a(8448);let l=r.forwardRef(({className:e,type:s,...a},r)=>t.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));l.displayName="Input"},1626:(e,s,a)=>{"use strict";a.d(s,{cn:()=>i});var t=a(6815),r=a(9377);function i(...e){return(0,r.m6)((0,t.W)(e))}},3024:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(9224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3037:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(9224).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},5390:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(9224).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2704:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(9224).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},6885:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(9224).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},7418:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(9224).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8852:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(9224).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},3229:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(9224).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},8448:(e,s,a)=>{"use strict";a.d(s,{Dx:()=>o,Ny:()=>d,cn:()=>i,o0:()=>c,p6:()=>n,xG:()=>l});var t=a(6815),r=a(9377);function i(...e){return(0,r.m6)((0,t.W)(e))}function l(e,s="ARS"){return new Intl.NumberFormat("es-AR",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function n(e){let s=new Date(e);return new Intl.DateTimeFormat("es-AR",{year:"numeric",month:"short",day:"numeric"}).format(s)}function c(e){let s=new Date(e);return new Intl.DateTimeFormat("es-AR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)}function o(e){switch(e){case"pendiente":return"badge-warning";case"aprobado":default:return"badge-info";case"liberado":return"badge-success";case"rechazado":case"cancelado":return"badge-danger"}}function d(e){switch(e){case"pendiente":return"Pendiente";case"aprobado":return"Aprobado";case"liberado":return"Liberado";case"rechazado":return"Rechazado";case"cancelado":return"Cancelado";default:return e}}},3942:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});let t=(0,a(6843).createProxy)(String.raw`d:\modificaciones-front\app\payments\client\page.tsx`),{__esModule:r,$$typeof:i}=t,l=t.default}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[267,496,689,5],()=>a(7242));module.exports=t})();